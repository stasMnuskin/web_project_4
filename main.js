!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._settings=e,this._formElement=n}var n,r;return n=t,(r=[{key:"_showError",value:function(e){var t=e.validationMessage;this._formElement.querySelector("#".concat(e.id,"-error")).textContent=t,e.classList.add(this._settings.inputErrorClass)}},{key:"_hideError",value:function(e){this._formElement.querySelector("#".concat(e.id,"-error")).textContent="",e.classList.remove(this._settings.inputErrorClass)}},{key:"_checkValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_setEventListeners",value:function(){var e=this,t=this._settings.inputSelector;this._formInputs=Array.from(this._formElement.querySelectorAll(t)),this._formInputs.forEach((function(t){t.addEventListener("input",(function(){e._checkValidity(t),e._toggleButtonState(e._formInputs)}))}))}},{key:"_toggleButtonState",value:function(){var e=this._settings,t=e.submitButtonSelector,n=e.inactiveButtonClass,r=this._formElement.querySelector(t),o=this._formInputs.every((function(e){return e.validity.valid}));r.disabled=!o,o?r.classList.remove(n):r.classList.add(n)}},{key:"resetValidation",value:function(){var e=this;this._formElement.reset(),this._formInputs.forEach((function(t){e._hideError(t)})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){var n=t.data,r=t.handleCardClick,o=t.handleDeleteButton,i=t.handleLike,a=t.selector,c=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n.name,this._link=n.link,this._like=n.likes,this._selector=a,this._handleCardClick=r,this._handleDeleteButton=o,this._id=n._id,this._ownerId=n.owner._id,this._handleLike=i,this._likes=n.likes,this._userId=c}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".elements__card").cloneNode(!0)}},{key:"getCardElement",value:function(){return this._card=this._getTemplate(),this._deleteButton=this._card.querySelector(".elements__card-delete"),this._likeButton=this._card.querySelector(".elements__card-button"),this._cardImage=this._card.querySelector(".elements__card-image"),this._addEventListeners(),this._card.querySelector(".elements__card-title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._ownerId!==this._userId&&(this._deleteButton.style.display="none"),this._card.querySelector(".elements__card-likes").textContent=this._likes.length,this.isLiked()&&this.likeCard(this._likes),this._card}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"likeCard",value:function(e){this._likes=e,this._card.querySelector(".elements__card-likes").textContent=this._likes.length,this._likeButton.classList.toggle("elements__card-button_active")}},{key:"removeCard",value:function(){this._card.remove()}},{key:"_addEventListeners",value:function(){var e=this;this._deleteButton.addEventListener("click",(function(){return e._handleDeleteButton(e._id)})),this._likeButton.addEventListener("click",(function(){return e._handleLike(e._id)})),this._cardImage.addEventListener("click",(function(t){return e._handleCardClick(t)}))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popupElement.classList.add("modal_open"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".modal__close-button").addEventListener("click",(function(){e.close()})),this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("modal")&&e.close()}))}}])&&o(t.prototype,n),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},u(e,t,n||e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submitHandler=t,n._form=n._popupElement.querySelector(".modal__form"),n}return t=a,(n=[{key:"changeButtonText",value:function(e){this._form.querySelector(".modal__form-button").textContent=e?"Saving...":"Save"}},{key:"getInputValues",value:function(){var e=Array.from(this._form.querySelectorAll(".modal__form-input")),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var e=this;u(f(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(){e._submitHandler()}))}},{key:"close",value:function(){u(f(a.prototype),"close",this).call(this),this._form.reset()}}])&&c(t.prototype,n),a}(i);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},_(e,t,n||e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function v(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(o){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function a(){return p(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e,t){var n=this._popupElement.querySelector(".modal__image"),r=this._popupElement.querySelector(".modal__caption");n.src=e,n.alt=t,r.textContent=t,_(b(a.prototype),"open",this).call(this)}}])&&y(t.prototype,n),a}(i);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t){var n=t.profileNameSelector,r=t.profileJobSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileNameSelector=document.querySelector(n),this._profileJobSelector=document.querySelector(r),this._avatarSelector=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._profileNameSelector.textContent,e.about=this._profileJobSelector.textContent,e}},{key:"setUserInfo",value:function(e){var t=e.userName,n=e.userJob;this._profileNameSelector.textContent=t,this._profileJobSelector.textContent=n}},{key:"changeAvatar",value:function(e){this._avatarSelector.style.backgroundImage="url(".concat(e,")")}}])&&k(t.prototype,n),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderer",value:function(e){var t=this;this._items=e,this._items.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&S(t.prototype,n),e}();function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},j(e,t,n||e)}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function I(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(){return O(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"setAction",value:function(e){this._submitHandler=e}},{key:"setEventListeners",value:function(){var e=this;j(T(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitHandler()}))}}])&&L(t.prototype,n),a}(d),R=document.querySelector(".profile__edit-button"),q=document.querySelector(".profile__add-button"),x=document.querySelector(".profile__image-button"),A={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__form-button",inactiveButtonClass:"modal__form-button_disabled",inputErrorClass:"modal__form-input_theme_error",errorClass:"modal__error_visible"},U=document.forms.edit,D=document.forms.add,V=document.forms.avatar,N=U.elements.input_name,J=U.elements.input_job;function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M,z=function(e,t){return fetch(e,t).then((function(e){if(e.ok)return e.json();Promise.reject("Error: ".concat(e.status))}))},$=new(function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t,this._headers=n}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return z("".concat(this._baseUrl,"/cards"),{headers:this._headers})}},{key:"getUserInfo",value:function(){return z("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}},{key:"createCard",value:function(e){return z("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})})}},{key:"updateProfile",value:function(e){return z("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.input_name,about:e.input_job})})}},{key:"deleteCard",value:function(e){return z("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers})}},{key:"likeCard",value:function(e){return z("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers})}},{key:"deleteLike",value:function(e){return z("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers})}},{key:"changeAvatar",value:function(e){return z("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})})}}])&&H(t.prototype,n),e}())("https://around.nomoreparties.co/v1/group-12",{authorization:"58a0c9dd-0104-421e-8188-69fa2ff9ad79","Content-Type":"application/json"});function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Promise.all([$.getInitialCards(),$.getUserInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];M=i._id,W.renderer(o),X.setUserInfo({userName:i.name,userJob:i.about}),X.changeAvatar(i.avatar)})).catch((function(e){console.log(e)}));var G=new g(".modal_type_image"),K=new B(".modal_type_delete-card");function Q(e){var t=new r({data:e,handleCardClick:function(e){e.preventDefault();var t=e.target,n=t.src,r=t.alt;G.open(n,r)},handleDeleteButton:function(e){K.open(),K.setAction((function(){$.deleteCard(e).then((function(e){t.removeCard(),K.close()})).catch((function(e){console.log(e)}))}))},handleLike:function(e){t.isLiked()?$.deleteLike(e).then((function(e){t.likeCard(e.likes)})).catch((function(e){console.log(e)})):$.likeCard(e).then((function(e){t.likeCard(e.likes)})).catch((function(e){console.log(e)}))},selector:".card-template",userId:M});return t.getCardElement()}K.setEventListeners(),G.setEventListeners();var W=new w((function(e){W.addItem(Q(e))}),".elements__list"),X=new E({profileNameSelector:".profile__name",profileJobSelector:".profile__job",avatarSelector:".profile__image"}),Y=new d(".modal_type_avatar",(function(){Y.changeButtonText(!0);var e=Y.getInputValues();$.changeAvatar(e).then((function(e){X.changeAvatar(e.avatar)})).then((function(){Y.close()})).catch((function(e){console.log(e)})).finally((function(){Y.changeButtonText(!1)}))}));Y.setEventListeners();var Z=new d(".modal_type_edit",(function(){Z.changeButtonText(!0);var e=Z.getInputValues();$.updateProfile(e).then((function(e){X.setUserInfo({userName:e.name,userJob:e.about})})).then((function(){return Z.close()})).catch((function(e){console.log(e)})).finally((function(){Z.changeButtonText(!1)}))}));Z.setEventListeners();var ee=new d(".modal_type_add",(function(){ee.changeButtonText(!0);var e=ee.getInputValues();$.createCard(e).then((function(e){W.addItem(Q(e))})).then((function(){return ee.close()})).catch((function(e){console.log(e)})).finally((function(){ee.changeButtonText(!1)}))}));ee.setEventListeners(),x.addEventListener("click",(function(){return ne.resetValidation(),void Y.open()})),R.addEventListener("click",(function(){return function(){re.resetValidation(),Z.open();var e=X.getUserInfo();N.value=e.name,J.value=e.about}()})),q.addEventListener("click",(function(){return te.resetValidation(),void ee.open()}));var te=new t(A,D);te.enableValidation();var ne=new t(A,V);ne.enableValidation();var re=new t(A,U);re.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTTixrQkFBaUIsR0FDMUIsSUFBTU8sRUFBaUJELEdBQVNKLGlCQUNoQ3JDLEVBQUFBLFdBQ2MwQyxHQUNYakQsTUFBSyxTQUFDQyxHQUNMc0IsRUFBUWlCLFFBQVFSLEVBQWdCL0IsT0FFakNELE1BQUssa0JBQU1nRCxHQUFTN0csV0FDcEJ3RixPQUFNLFNBQUN4SyxHQUNOeUssUUFBUUMsSUFBSTFLLE1BRWIwTCxTQUFRLFdBQ1BHLEdBQVNOLGtCQUFpQixTQUdoQ00sR0FBU1Qsb0JBT1R6RCxFQUFpQnhHLGlCQUFpQixTQUFTLGtCQUh6QzRLLEdBQW9CQyx1QkFDcEJWLEVBQWdCTixVQVlsQnZELEVBQWV0RyxpQkFBaUIsU0FBUyxrQkFQekMsV0FDRThLLEdBQWtCRCxrQkFDbEJMLEVBQWNYLE9BQ2QsSUFBTWtCLEVBQWlCN0IsRUFBU0osY0FDaEM3QixFQUFVekMsTUFBUXVHLEVBQWUxSixLQUNqQytGLEVBQVM1QyxNQUFRdUcsRUFBZTFGLE1BRWEyRixNQU8vQ3pFLEVBQWN2RyxpQkFBaUIsU0FBUyxrQkFIdENpTCxHQUFxQkosdUJBQ3JCSCxHQUFTYixVQUtYLElBQU1vQixHQUF1QixJQUFJM00sRUFBY0MsRUFBVXVJLEdBQ3pEbUUsR0FBcUJDLG1CQUdyQixJQUFNTixHQUFzQixJQUFJdE0sRUFBY0MsRUFBVXdJLEdBQ3hENkQsR0FBb0JNLG1CQUdwQixJQUFNSixHQUFvQixJQUFJeE0sRUFBY0MsRUFBVW9JLEdBQ3REbUUsR0FBa0JJLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VicGFjay8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2VicGFjay8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2VicGFjay8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYnBhY2svLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zaG93RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvciA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiZXJyb3IgPSBcIiwgZXJyb3IpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiZXJyb3JFbGVtZW50ID0gXCIsIGVycm9yRWxlbWVudCk7XG5cbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvcjtcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUVycm9yKGlucHV0KSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJgJHtpbnB1dC5pZH0tZXJyb3JgID0gXCIsIGAke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiZXJyb3JFbGVtZW50ID0gXCIsIGVycm9yRWxlbWVudCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tWYWxpZGl0eShpbnB1dCkge1xuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0KTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgeyBpbnB1dFNlbGVjdG9yIH0gPSB0aGlzLl9zZXR0aW5ncztcbiAgICB0aGlzLl9mb3JtSW5wdXRzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9mb3JtSW5wdXRzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGNvbnN0IHsgc3VibWl0QnV0dG9uU2VsZWN0b3IsIGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIGNvbnN0IGlzRm9ybVZhbGlkID0gdGhpcy5fZm9ybUlucHV0cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgICBidXR0b24uZGlzYWJsZWQgPSAhaXNGb3JtVmFsaWQ7XG4gICAgaWYgKGlzRm9ybVZhbGlkKSB7XG4gICAgICAvL2lmIHRoZSBmb3JtIGlzIHZhbGlkIGVuYWJsZSBidXR0b25cbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvL2Rpc2FibGUgYnV0dG9uXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICB9XG59XG5cbmV4cG9ydCB7IEZvcm1WYWxpZGF0b3IgfTtcbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGRhdGEsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUJ1dHRvbixcbiAgICBoYW5kbGVMaWtlLFxuICAgIHNlbGVjdG9yLFxuICAgIHVzZXJJZCxcbiAgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9saWtlID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24gPSBoYW5kbGVEZWxldGVCdXR0b247XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5faGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XG4gIH1cblxuICBnZXRDYXJkRWxlbWVudCgpIHtcbiAgICAvL2dldCB0aGUgdGVtcGxhdGVcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIC8vZ2V0IHRoZSBsaWtlIGFuZCBkZWxldGUgYnV0dG9uc1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1kZWxldGVcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1idXR0b25cIik7XG4gICAgLy9zZXR0aW5nIHRoZSB0ZW1wbGF0ZXMgcHJvcGVydGllc1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKTtcbiAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC10aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG5cbiAgICAvLyBjaGVjayBpZiB0aGUgY2FyZCBpcyBvd25lZFxuICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG4gICAgLy9zZXR0aW5nIHRoZSBudW1iZXIgb2YgbGlrZXNcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtbGlrZXNcIikudGV4dENvbnRlbnQgPVxuICAgICAgdGhpcy5fbGlrZXMubGVuZ3RoO1xuXG4gICAgLy9pZiB0cnVlOiBzZXR0aW5nIHRoZVxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xuICAgICAgdGhpcy5saWtlQ2FyZCh0aGlzLl9saWtlcyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG5cbiAgaXNMaWtlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgocGVyc29uKSA9PiB7XG4gICAgICByZXR1cm4gcGVyc29uLl9pZCA9PT0gdGhpcy5fdXNlcklkO1xuICAgIH0pO1xuICB9XG5cbiAgbGlrZUNhcmQobmV3TGlrZXMpIHtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLl9saWtlQ291bnRlcik7XG4gICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtbGlrZXNcIikudGV4dENvbnRlbnQgPVxuICAgICAgdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRzX19jYXJkLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICByZW1vdmVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XG4gICAgLy8gdGhpcy5fY2FyZCA9IG51bGw7XG4gIH1cblxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9kZWxldGluZyB0aGUgY2FyZFxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbih0aGlzLl9pZClcbiAgICApO1xuICAgIC8vbGlraW5nIHRoZSBjYXJkXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUxpa2UodGhpcy5faWQpXG4gICAgKTtcbiAgICAvL29wZW5pbmcgdGhlIGltYWdlIG1vZGFsXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PlxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGV2dClcbiAgICApO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cbiAgLy9jbG9zZSB3aXRoIFwiZXNjXCJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VCdXR0b25UZXh0KGlzVXBsb2FkaW5nKSB7XHJcbiAgICBjb25zdCBzYXZlQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtLWJ1dHRvblwiKTtcclxuICAgIGlmIChpc1VwbG9hZGluZykge1xyXG4gICAgICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNhdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm0taW5wdXRcIilcclxuICAgICk7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKTtcclxuICAgICAgLy8gdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIG9wZW4obGluaywgdGV4dCkge1xuICAgIGNvbnN0IGltYWdlRnJvbU1vZGFsID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIGNvbnN0IGNhcHRpb25Gcm9tTW9kYWwgPVxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5cbiAgICBpbWFnZUZyb21Nb2RhbC5zcmMgPSBsaW5rO1xuICAgIGltYWdlRnJvbU1vZGFsLmFsdCA9IHRleHQ7XG4gICAgY2FwdGlvbkZyb21Nb2RhbC50ZXh0Q29udGVudCA9IHRleHQ7XG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgcHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZUpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWVTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fcHJvZmlsZUpvYlNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCBuZXdVc2VySW5mbyA9IHt9O1xuICAgIG5ld1VzZXJJbmZvLm5hbWUgPSB0aGlzLl9wcm9maWxlTmFtZVNlbGVjdG9yLnRleHRDb250ZW50O1xuICAgIG5ld1VzZXJJbmZvLmFib3V0ID0gdGhpcy5fcHJvZmlsZUpvYlNlbGVjdG9yLnRleHRDb250ZW50O1xuICAgIHJldHVybiBuZXdVc2VySW5mbztcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgdXNlck5hbWUsIHVzZXJKb2IgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lU2VsZWN0b3IudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcbiAgICB0aGlzLl9wcm9maWxlSm9iU2VsZWN0b3IudGV4dENvbnRlbnQgPSB1c2VySm9iO1xuICB9XG4gIGNoYW5nZUF2YXRhciAodXNlckF2YXRhcikge1xuICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt1c2VyQXZhdGFyfSlgXG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IocmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuICByZW5kZXJlcihkYXRhKSB7XG4gICAgdGhpcy5faXRlbXMgPSBkYXRhO1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwV2l0aEZvcm0ge1xyXG4gIHNldEFjdGlvbihhY3Rpb24pIHtcclxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBhY3Rpb247XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvL29wZW4gbW9kYWwgYnV0dG9uc1xuZXhwb3J0IGNvbnN0IG9wZW5FZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBvcGVuQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IG9wZW5BdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLWJ1dHRvblwiKTtcblxuLy9pbml0aWFsIHNldHRpbmdzXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19mb3JtLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXRfdGhlbWVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuLy9mb3Jtc1xuZXhwb3J0IGNvbnN0IGVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXMuZWRpdDtcbmV4cG9ydCBjb25zdCBhZGRGb3JtID0gZG9jdW1lbnQuZm9ybXMuYWRkO1xuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm0gPSBkb2N1bWVudC5mb3Jtcy5hdmF0YXI7XG5cbi8vbmFtZSBhbmQgam9iIGlucHV0c1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGVkaXRGb3JtLmVsZW1lbnRzLmlucHV0X25hbWU7XG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBlZGl0Rm9ybS5lbGVtZW50cy5pbnB1dF9qb2I7XG4iLCJjb25zdCBjdXN0b21GZXRjaCA9ICh1cmwsIGhlYWRlcnMpID0+IHtcclxuICByZXR1cm4gZmV0Y2godXJsLCBoZWFkZXJzKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGlmIChyZXN1bHQub2spIHtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7XHJcbiAgICB9XHJcbiAgICBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzdWx0LnN0YXR1c31gKTtcclxuICB9KTtcclxufTtcclxuXHJcbmNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoYmFzZVVybCwgaGVhZGVycykge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IGRhdGEubmFtZSwgbGluazogZGF0YS5saW5rIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHVwZGF0ZVByb2ZpbGUoZGF0YSkge1xyXG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBkYXRhLmlucHV0X25hbWUsIGFib3V0OiBkYXRhLmlucHV0X2pvYiB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcbiAgY2hhbmdlQXZhdGFyKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBhdmF0YXIubGluayB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsIHtcclxuICBhdXRob3JpemF0aW9uOiBcIjU4YTBjOWRkLTAxMDQtNDIxZS04MTg4LTY5ZmEyZmY5YWQ3OVwiLFxyXG4gIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG59KTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aFN1Ym1pdCB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIG9wZW5FZGl0QnV0dG9uLFxyXG4gIG9wZW5BZGRCdXR0b24sXHJcbiAgc2V0dGluZ3MsXHJcbiAgZWRpdEZvcm0sXHJcbiAgbmFtZUlucHV0LFxyXG4gIGpvYklucHV0LFxyXG4gIGFkZEZvcm0sXHJcbiAgYXZhdGFyRm9ybSxcclxuICBvcGVuQXZhdGFyQnV0dG9uLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxyXG4gIC50aGVuKChbY2FyZERhdGEsIHVzZXJEYXRhXSkgPT4ge1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgc2VjdGlvbi5yZW5kZXJlcihjYXJkRGF0YSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIHVzZXJOYW1lOiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgICB1c2VySm9iOiB1c2VyRGF0YS5hYm91dCxcclxuICAgIH0pO1xyXG4gICAgdXNlckluZm8uY2hhbmdlQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgfSk7XHJcblxyXG4vL2ltYWdlIGFuZCBkZWxldGUgbW9kYWxcclxuY29uc3QgaW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5tb2RhbF90eXBlX2ltYWdlXCIpO1xyXG5jb25zdCBjb25maXJtTW9kYWwgPSBuZXcgUG9wdXBXaXRoU3VibWl0KFwiLm1vZGFsX3R5cGVfZGVsZXRlLWNhcmRcIik7XHJcblxyXG5jb25maXJtTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuaW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9mdW5jdGlvbiB0aGF0IGlzIG1ha2luZyBhIGNhcmRcclxuZnVuY3Rpb24gZ2VuZXJhdGVOZXdDYXJkKGluZm8pIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xyXG4gICAgZGF0YTogaW5mbyxcclxuICAgIC8vIGlkOiBpbmZvLl9pZCxcclxuICAgIGhhbmRsZUNhcmRDbGljazogKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcclxuICAgICAgY29uc3QgbGluayA9IHRhcmdldC5zcmM7XHJcbiAgICAgIGNvbnN0IHRleHQgPSB0YXJnZXQuYWx0O1xyXG4gICAgICBpbWFnZU1vZGFsLm9wZW4obGluaywgdGV4dCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlRGVsZXRlQnV0dG9uOiAodXNlcklkKSA9PiB7XHJcbiAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICAgIGNvbmZpcm1Nb2RhbC5zZXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmRlbGV0ZUNhcmQodXNlcklkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcclxuICAgICAgICAgICAgY29uZmlybU1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlTGlrZTogKHVzZXJJZCkgPT4ge1xyXG4gICAgICBjb25zdCBpc0FscmVhZHlMaWtlZCA9IGNhcmQuaXNMaWtlZCgpO1xyXG4gICAgICBpZiAoaXNBbHJlYWR5TGlrZWQpIHtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5kZWxldGVMaWtlKHVzZXJJZClcclxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5saWtlQ2FyZChyZXN1bHQubGlrZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAubGlrZUNhcmQodXNlcklkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLmxpa2VDYXJkKHJlc3VsdC5saWtlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNlbGVjdG9yOiBcIi5jYXJkLXRlbXBsYXRlXCIsXHJcbiAgICB1c2VySWQ6IHVzZXJJZCxcclxuICB9KTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0Q2FyZEVsZW1lbnQoKTtcclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG4vL3ByZS1wZW5kaW5nIGEgY2FyZCB0byB0aGUgY3JkIGxpc3RcclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKChjYXJkKSA9PiB7XHJcbiAgc2VjdGlvbi5hZGRJdGVtKGdlbmVyYXRlTmV3Q2FyZChjYXJkKSk7XHJcbn0sIFwiLmVsZW1lbnRzX19saXN0XCIpO1xyXG5cclxuLy9zZXR0aW5nIHVwIHByb2ZpbGUgc2VsZWN0b3JzXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBwcm9maWxlTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgcHJvZmlsZUpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19qb2JcIixcclxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9faW1hZ2VcIixcclxufSk7XHJcblxyXG4vL2F2YXRhciBtb2RhbFxyXG5jb25zdCBhdmF0YXJGb3JtTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5tb2RhbF90eXBlX2F2YXRhclwiLCAoKSA9PiB7XHJcbiAgYXZhdGFyRm9ybU1vZGFsLmNoYW5nZUJ1dHRvblRleHQodHJ1ZSk7XHJcbiAgY29uc3QgYXZhdGFySW5wdXQgPSBhdmF0YXJGb3JtTW9kYWwuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICBhcGlcclxuICAgIC5jaGFuZ2VBdmF0YXIoYXZhdGFySW5wdXQpXHJcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLmNoYW5nZUF2YXRhcihyZXN1bHQuYXZhdGFyKTtcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGF2YXRhckZvcm1Nb2RhbC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYXZhdGFyRm9ybU1vZGFsLmNoYW5nZUJ1dHRvblRleHQoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXZhdGFyRm9ybU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL3NldHRpbmcgdXAgdGhlIGVkaXQgbW9kYWxcclxuY29uc3QgZWRpdEZvcm1Nb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLm1vZGFsX3R5cGVfZWRpdFwiLCAoKSA9PiB7XHJcbiAgZWRpdEZvcm1Nb2RhbC5jaGFuZ2VCdXR0b25UZXh0KHRydWUpO1xyXG4gIGNvbnN0IGVkaXRJbnB1dHMgPSBlZGl0Rm9ybU1vZGFsLmdldElucHV0VmFsdWVzKCk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlUHJvZmlsZShlZGl0SW5wdXRzKVxyXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IHVzZXJOYW1lOiByZXN1bHQubmFtZSwgdXNlckpvYjogcmVzdWx0LmFib3V0IH0pO1xyXG4gICAgfSlcclxuICAgIC50aGVuKCgpID0+IGVkaXRGb3JtTW9kYWwuY2xvc2UoKSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdEZvcm1Nb2RhbC5jaGFuZ2VCdXR0b25UZXh0KGZhbHNlKVxyXG4gICAgfSk7XHJcbn0pO1xyXG5lZGl0Rm9ybU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL2FkZGluZyBhIGNhcmQgd2l0aCB1c2VycyBpbnB1dHMgYW5kIGFkZCBpdCB0byB0aGUgc2VydmVyXHJcbmNvbnN0IGFkZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIubW9kYWxfdHlwZV9hZGRcIiwgKCkgPT4ge1xyXG4gIGFkZE1vZGFsLmNoYW5nZUJ1dHRvblRleHQodHJ1ZSk7XHJcbiAgY29uc3QgYWRkTW9kYWxJbnB1dHMgPSBhZGRNb2RhbC5nZXRJbnB1dFZhbHVlcygpO1xyXG4gIGFwaVxyXG4gICAgLmNyZWF0ZUNhcmQoYWRkTW9kYWxJbnB1dHMpXHJcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgIHNlY3Rpb24uYWRkSXRlbShnZW5lcmF0ZU5ld0NhcmQocmVzdWx0KSk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4gYWRkTW9kYWwuY2xvc2UoKSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYWRkTW9kYWwuY2hhbmdlQnV0dG9uVGV4dChmYWxzZSlcclxuICAgIH0pO1xyXG59KTtcclxuYWRkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vZnVuY3Rpb24gdGhhdCBpcyBvcGVuaW5nIGFuZCByZXNldCB0aGUgdmFsaWRhdGlvbiBvZiB0aGUgYXZhdGFyIGZvcm1cclxuZnVuY3Rpb24gYXZhdGFyRm9ybUxpc3RlbmVyKCkge1xyXG4gIGF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYXZhdGFyRm9ybU1vZGFsLm9wZW4oKTtcclxufVxyXG5vcGVuQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhdmF0YXJGb3JtTGlzdGVuZXIoKSk7XHJcblxyXG4vL2Z1bmN0aW9uIHRoYXQgaXMgb3BlbmluZyAgdGhlIGVkaXQgZm9ybSBhbmQgY2hhbmdpbmcgdGhlIHZhbHVlcyBvZiBpdHMgaW5wdXRzXHJcbmZ1bmN0aW9uIGVkaXRGb3JtTGlzdGVuZXIoKSB7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdEZvcm1Nb2RhbC5vcGVuKCk7XHJcbiAgY29uc3QgZWRpdEZvcm1JbnB1dHMgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IGVkaXRGb3JtSW5wdXRzLm5hbWU7XHJcbiAgam9iSW5wdXQudmFsdWUgPSBlZGl0Rm9ybUlucHV0cy5hYm91dDtcclxufVxyXG5vcGVuRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gZWRpdEZvcm1MaXN0ZW5lcigpKTtcclxuXHJcbi8vZnVuY3Rpb24gdGhhdCBpcyBvcGVuaW5nIGFuZCByZXNldCB0aGUgdmFsaWRhdGlvbiBvZiB0aGUgYWRkIGZvcm1cclxuZnVuY3Rpb24gYWRkRm9ybUxpc3RlbmVyKCkge1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZE1vZGFsLm9wZW4oKTtcclxufVxyXG5vcGVuQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRGb3JtTGlzdGVuZXIoKSk7XHJcblxyXG4vLyB2YWxpZGF0aW9uIG9mIHRoZSBcImFkZCBmb3JtXCJcclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkRm9ybSk7XHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vIHZhbGlkYXRpb24gb2YgdGhlIFwiYXZhdGFyIGZvcm1cIlxyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGF2YXRhckZvcm0pO1xyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vdmFsaWRhdGlvbiBvZiB0aGUgZWRpdCBmb3JtXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGVkaXRGb3JtKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXQiLCJlcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVFcnJvciIsIl9zaG93RXJyb3IiLCJpbnB1dFNlbGVjdG9yIiwiX2Zvcm1JbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImJ1dHRvbiIsImlzRm9ybVZhbGlkIiwiZXZlcnkiLCJkaXNhYmxlZCIsInJlc2V0IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJDYXJkIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUJ1dHRvbiIsImhhbmRsZUxpa2UiLCJzZWxlY3RvciIsInVzZXJJZCIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlIiwibGlrZXMiLCJfc2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9pZCIsIl9vd25lcklkIiwib3duZXIiLCJfaGFuZGxlTGlrZSIsIl9saWtlcyIsIl91c2VySWQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZCIsIl9nZXRUZW1wbGF0ZSIsIl9kZWxldGVCdXR0b24iLCJfbGlrZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJzdHlsZSIsImRpc3BsYXkiLCJsZW5ndGgiLCJpc0xpa2VkIiwibGlrZUNhcmQiLCJzb21lIiwicGVyc29uIiwibmV3TGlrZXMiLCJ0b2dnbGUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImtleSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEhhbmRsZXIiLCJfc3VibWl0SGFuZGxlciIsIl9mb3JtIiwiaXNVcGxvYWRpbmciLCJpbnB1dHMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwiUG9wdXBXaXRoSW1hZ2UiLCJ0ZXh0IiwiaW1hZ2VGcm9tTW9kYWwiLCJjYXB0aW9uRnJvbU1vZGFsIiwiVXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWVTZWxlY3RvciIsIl9wcm9maWxlSm9iU2VsZWN0b3IiLCJfYXZhdGFyU2VsZWN0b3IiLCJuZXdVc2VySW5mbyIsImFib3V0IiwidXNlck5hbWUiLCJ1c2VySm9iIiwidXNlckF2YXRhciIsImJhY2tncm91bmRJbWFnZSIsIlNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIl9pdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwV2l0aFN1Ym1pdCIsImFjdGlvbiIsImUiLCJvcGVuRWRpdEJ1dHRvbiIsIm9wZW5BZGRCdXR0b24iLCJvcGVuQXZhdGFyQnV0dG9uIiwiZm9ybVNlbGVjdG9yIiwiZXJyb3JDbGFzcyIsImVkaXRGb3JtIiwiZm9ybXMiLCJlZGl0IiwiYWRkRm9ybSIsImF2YXRhckZvcm0iLCJhdmF0YXIiLCJuYW1lSW5wdXQiLCJlbGVtZW50cyIsImlucHV0X25hbWUiLCJqb2JJbnB1dCIsImlucHV0X2pvYiIsImN1c3RvbUZldGNoIiwidXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsInJlc3VsdCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJhcGkiLCJBcGkiLCJiYXNlVXJsIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiY2FyZERhdGEiLCJ1c2VyRGF0YSIsInNlY3Rpb24iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2hhbmdlQXZhdGFyIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwiaW1hZ2VNb2RhbCIsImNvbmZpcm1Nb2RhbCIsImdlbmVyYXRlTmV3Q2FyZCIsImluZm8iLCJjYXJkIiwib3BlbiIsInNldEFjdGlvbiIsInJlbW92ZUNhcmQiLCJnZXRDYXJkRWxlbWVudCIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWRkSXRlbSIsImF2YXRhckZvcm1Nb2RhbCIsImNoYW5nZUJ1dHRvblRleHQiLCJhdmF0YXJJbnB1dCIsImdldElucHV0VmFsdWVzIiwiZmluYWxseSIsImVkaXRGb3JtTW9kYWwiLCJlZGl0SW5wdXRzIiwiYWRkTW9kYWwiLCJhZGRNb2RhbElucHV0cyIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJyZXNldFZhbGlkYXRpb24iLCJlZGl0Rm9ybVZhbGlkYXRvciIsImVkaXRGb3JtSW5wdXRzIiwiZWRpdEZvcm1MaXN0ZW5lciIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=